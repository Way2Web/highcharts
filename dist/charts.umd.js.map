{"version":3,"file":"charts.umd.js","sources":["../src/charts.js"],"sourcesContent":["import Highcharts from 'highcharts';\n\n/**\n * Add charts to the page with ajax.\n *\n * @param {object} element\n * @param {object} config\n *\n * @return {object}\n */\nwindow.Chart = (function(element, config) {\n    'use strict';\n\n    var version = '3.0.0';\n\n    var highchart;\n\n    var settings = {\n        id:     null,\n        url:    null,\n        chart:  null,\n        series: null,\n        titles: {}\n    };\n\n    var attributes = {\n        url:        'chart-url',\n        title:      'chart-title',\n        xAxisTitle: 'chart-xaxis-title',\n        yAxisTitle: 'chart-yaxis-title',\n        zAxisTitle: 'chart-zaxis-title',\n        preset:     'chart-preset',\n        dynamic:    'chart-dynamic'\n    };\n\n    var functions = {\n        /**\n         * Get the element.\n         * Get the url from the element.\n         * Then get the json data.\n         */\n        init: function() {\n            if (!element || !element.attr('id')) {\n                return;\n            }\n\n            settings.id = element.attr('id');\n            settings.preset = element.data(attributes.preset);\n            settings.url = element.data(attributes.url);\n            settings.dynamic = element.data(attributes.dynamic);\n            settings.title = element.data(attributes.title);\n            settings.titles.xAxis = element.data(attributes.xAxisTitle);\n            settings.titles.yAxis = element.data(attributes.yAxisTitle);\n            settings.titles.zAxis = element.data(attributes.zAxisTitle);\n\n            fetch(settings.url)\n                .then(response => response.json())\n                .then(data => {\n                    functions.addChart(data);\n                });\n        },\n\n        /**\n         * Add a chart.\n         *\n         * @param {object} series\n         */\n        addChart: function(series) {\n            settings.chart = Object.assign({}, config['all'], config[settings.preset] || {}); ;\n\n            settings.series = series;\n            const HighchartsPackage = Highcharts || window.Highcharts;\n\n            highchart = HighchartsPackage.chart(\n                settings.id,\n                settings.chart\n            );\n\n            settings.series.forEach(functions.addSeries.bind(this));\n            Object.entries(settings.titles).forEach(functions.setTitle.bind(this));\n\n            if(settings.title) {\n                highchart.setTitle({\n                    text: settings.title\n                });\n            }\n        },\n\n        /**\n         * Add the series name and data.\n         *\n         * @param {object} serie\n         * @param {number} index\n         */\n        addSeries: function(serie, index) {\n            if(settings.dynamic) {\n                highchart.addSeries(serie);\n\n                return;\n            }\n\n            if(serie.name) {\n                if(!highchart.series[index]) {\n                    return;\n                }\n\n                highchart.series[index].update({\n                    name: serie.name\n                }, false);\n            }\n\n            if (highchart.series[index]) {\n                highchart.series[index].setData(serie.data);\n            }\n        },\n\n        /**\n         * Set the chart titles.\n         *\n         * @param {string} title\n         * @param {string} key\n         */\n        setTitle: function(title, key) {\n            if(highchart[key]) {\n                highchart[key][0].setTitle({\n                    text: title\n                });\n            }\n        },\n\n        /**\n         * Update chart.\n         *\n         * @param {object} values\n         */\n        updateChart: function(values) {\n            highchart.update(values);\n        },\n\n        /**\n         * Filter the chart.\n         *\n         * @param {string} axis\n         * @param {object} values\n         * @param {number} index\n         */\n        filterChart: function(axis, values, index) {\n            var axisIndex = index;\n\n            if(!axisIndex) {\n                axisIndex = 0;\n            }\n\n            highchart[axis][axisIndex].update(values);\n        },\n\n        /**\n         * Show the loading message.\n         */\n        showLoading: function() {\n            highchart.showLoading();\n        },\n\n        /**\n         * Hide the loading message.\n         */\n        hideLoading: function() {\n            highchart.hideLoading();\n        }\n    };\n\n    return {\n        settings:    settings,\n        add:         functions.addChart,\n        filter:      functions.filterChart,\n        update:      functions.updateChart,\n        init:        functions.init,\n        showLoading: functions.showLoading,\n        hideLoading: functions.hideLoading,\n        version:     version\n    };\n});\n\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = window.Chart;\n}\n"],"names":["window","Chart","element","config","highchart","settings","id","url","chart","series","titles","functions","init","attr","preset","data","dynamic","title","xAxis","yAxis","zAxis","fetch","then","response","json","addChart","Object","assign","HighchartsPackage","Highcharts","forEach","addSeries","bind","this","entries","setTitle","text","serie","index","name","update","setData","key","updateChart","values","filterChart","axis","axisIndex","showLoading","hideLoading","add","filter","version","module","exports"],"mappings":"2QAUAA,OAAOC,MAAS,SAASC,EAASC,GAG9B,IAEIC,EAEAC,EAAW,CACXC,GAAQ,KACRC,IAAQ,KACRC,MAAQ,KACRC,OAAQ,KACRC,OAAQ,IAaRC,EAAY,CAMZC,KAAM,WACGV,GAAYA,EAAQW,KAAK,QAI9BR,EAASC,GAAKJ,EAAQW,KAAK,MAC3BR,EAASS,OAASZ,EAAQa,KAhBlB,gBAiBRV,EAASE,IAAML,EAAQa,KAtBf,aAuBRV,EAASW,QAAUd,EAAQa,KAjBnB,iBAkBRV,EAASY,MAAQf,EAAQa,KAvBjB,eAwBRV,EAASK,OAAOQ,MAAQhB,EAAQa,KAvBxB,qBAwBRV,EAASK,OAAOS,MAAQjB,EAAQa,KAvBxB,qBAwBRV,EAASK,OAAOU,MAAQlB,EAAQa,KAvBxB,qBAyBRM,MAAMhB,EAASE,KACVe,KAAK,SAAAC,UAAYA,EAASC,SAC1BF,KAAK,SAAAP,GACFJ,EAAUc,SAASV,OAS/BU,SAAU,SAAShB,GACfJ,EAASG,MAAQkB,OAAOC,OAAO,GAAIxB,EAAM,IAASA,EAAOE,EAASS,SAAW,IAE7ET,EAASI,OAASA,EAClB,IAAMmB,EAAoBC,GAAc7B,OAAO6B,WAE/CzB,EAAYwB,EAAkBpB,MAC1BH,EAASC,GACTD,EAASG,OAGbH,EAASI,OAAOqB,QAAQnB,EAAUoB,UAAUC,KAAKC,OACjDP,OAAOQ,QAAQ7B,EAASK,QAAQoB,QAAQnB,EAAUwB,SAASH,KAAKC,OAE7D5B,EAASY,OACRb,EAAU+B,SAAS,CACfC,KAAM/B,EAASY,SAW3Bc,UAAW,SAASM,EAAOC,GACvB,GAAGjC,EAASW,QACRZ,EAAU2B,UAAUM,OADxB,CAMA,GAAGA,EAAME,KAAM,CACX,IAAInC,EAAUK,OAAO6B,GACjB,OAGJlC,EAAUK,OAAO6B,GAAOE,OAAO,CAC3BD,KAAMF,EAAME,OACb,GAGHnC,EAAUK,OAAO6B,IACjBlC,EAAUK,OAAO6B,GAAOG,QAAQJ,EAAMtB,QAU9CoB,SAAU,SAASlB,EAAOyB,GACnBtC,EAAUsC,IACTtC,EAAUsC,GAAK,GAAGP,SAAS,CACvBC,KAAMnB,KAUlB0B,YAAa,SAASC,GAClBxC,EAAUoC,OAAOI,IAUrBC,YAAa,SAASC,EAAMF,EAAQN,GAChC,IAAIS,EAAYT,EAEZS,IACAA,EAAY,GAGhB3C,EAAU0C,GAAMC,GAAWP,OAAOI,IAMtCI,YAAa,WACT5C,EAAU4C,eAMdC,YAAa,WACT7C,EAAU6C,gBAIlB,MAAO,CACH5C,SAAaA,EACb6C,IAAavC,EAAUc,SACvB0B,OAAaxC,EAAUkC,YACvBL,OAAa7B,EAAUgC,YACvB/B,KAAaD,EAAUC,KACvBoC,YAAarC,EAAUqC,YACvBC,YAAatC,EAAUsC,YACvBG,QAtKU,UA0KI,oBAAXC,QAA0BA,OAAOC,UACxCD,OAAOC,QAAUtD,OAAOC"}